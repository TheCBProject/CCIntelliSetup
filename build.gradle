buildscript {
    repositories {
        jcenter()
    }
}

apply plugin: 'maven'
apply plugin: 'java'
apply plugin: 'idea'

group = "covers1624.ccintelli"
archivesBaseName = "covers1624.CCIntelliSetup"

// Define properties file
ext.configFile = file "build.properties"

import org.apache.tools.ant.filters.*;

configFile.withReader {
    // Load config.  It shall from now be referenced as simply config or project.config
    def prop = new Properties()
    prop.load(it)
    project.ext.config = new ConfigSlurper().parse prop
}
String buildNo = 1
version = "${project.config.version}." + buildNo

def commonManifest = {
    attributes 'Main-Class': 'covers1624.ccintelli.launch.Launch'
}

configurations {
    compile
}

repositories {
    jcenter()
}

dependencies {
    compile 'com.google.guava:guava:17.0'
    compile 'org.apache.commons:commons-io:1.3.2'
    compile 'net.sf.jopt-simple:jopt-simple:4.5'
    compile 'org.apache.httpcomponents:httpclient:4.5.2'
    compile 'org.apache.httpcomponents:httpmime:4.5.2'
    compile 'com.google.code.gson:gson:2.6.2'
}

processResources {

}

jar {
    manifest commonManifest
}

idea {
    module{
        sourceDirs += file('src/main/java')
        sourceDirs += file('src/main/resources')

        scopes.COMPILE.plus += [configurations.compile]

        downloadJavadoc = true
        downloadSources = true
    }
}


